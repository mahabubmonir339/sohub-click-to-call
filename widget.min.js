! function() {
    this.CallmeWidgetNew = function(e) {
        var l = e;
        if (void 0 === L) var L = {};
        var a, o, c, S, n, i, R, O, H, W, Z, P, j, U, t, r, J, q, d, m, s, u, _, p, g, G = {
                shape: "circle",
                language: "en",
                dtmf: !1,
                dtmf_position: "top",
                dtmf_time_to_disappear: 20,
                dtmf_auto_show: !0,
                color_call: "rgb(255, 255, 255)",
                color_bg_call: "rgb(126, 211, 33)",
                color_border_call: "rgb(191, 233, 144)",
                color_connection: "rgb(255, 255, 255)",
                color_bg_connection: "rgb(33, 211, 166)",
                color_border_connection: "rgb(144, 233, 211)",
                color_calling: "rgb(255, 255, 255)",
                color_bg_calling: "rgb(255, 181, 0)",
                color_border_calling: "rgb(255, 218, 128)",
                color_ended: "rgb(255, 255, 255)",
                color_bg_ended: "rgb(164,164,164)",
                color_border_ended: "rgb(210, 210, 210)",
                font: '"Trebuchet MS", "Helvetica CY", sans-serif',
                txt_greeting: "",
                txt_nowebrtc: "",
                widgetId: !1,
                sipId: !1,
                domain: !1
            },
            h = window.AudioContext || window.webkitAudioContext || !1,
            f = 0,
            v = "call",
            b = !1,
            w = function() {
                z.call(this)
            },
            M = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream || "MacIntel" == window.navigator.platform;

        function E() {
            (function() {
                H.style.visibility = "hidden";
                var e = "z-callme-widget"; - 1 == (t = H.className.split(" ")).indexOf(e) && (H.className += " " + e);
                var e = "callme--" + G.shape; - 1 == (t = H.className.split(" ")).indexOf(e) && (H.className += " " + e);
                var e = "callme"; - 1 == (t = H.className.split(" ")).indexOf(e) && (H.className += " " + e);
                var e = "callme--default"; - 1 == (t = H.className.split(" ")).indexOf(e) && (H.className += " " + e);
                if (G.dtmf) {
                    var e = "callme--dtmf-" + G.dtmf_position,
                        t = H.className.split(" "); - 1 == t.indexOf(e) && (H.className += " " + e)
                }(S = document.createElement("audio")).setAttribute("playsinline", !0), S.setAttribute("controls", !0), S.id = "webRTCRemoteView_" + O, S.style.width = "0px", S.style.display = "none", S.style.height = "0px", S.setAttribute("autoplay", !0), H.appendChild(S), (J = document.createElement("audio")).id = "outgoingRing_" + O, J.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/out.wav"), J.setAttribute("preload", "auto"), H.appendChild(J), document.getElementById("outgoingRing_" + O).load(), (q = document.createElement("audio")).id = "buzyRing_" + O, q.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/busy.wav"), q.setAttribute("preload", "auto"), H.appendChild(q), document.getElementById("buzyRing_" + O).load();
                var a = document.createElement("audio");
                a.id = "hangup_" + O, a.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/hangup.wav"), a.setAttribute("preload", "auto"), H.appendChild(a), document.getElementById("hangup_" + O).load();
                var l = document.createElement("div");
                l.className = "callme__content", H.appendChild(l);
                var o = document.createElement("div");
                o.className = "callme__icon", l.appendChild(o);
                var c = document.createElement("div");
                c.className = "default-phone-ico", o.appendChild(c);
                var n = document.createElement("i");
                n.className = "z-icon icon-default-phone-ico", c.appendChild(n);
                var i = document.createElement("div");
                i.className = "callme__icon__text", i.innerHTML = L.call, c.appendChild(i);
                var r = document.createElement("div");
                r.className = "connecting-phone-ico", o.appendChild(r);
                var d = document.createElement("i");
                d.className = "z-icon icon-connecting-phone-ico", r.appendChild(d);
                var m = document.createElement("div");
                m.className = "callme__icon__text", m.innerHTML = L.connection, r.appendChild(m);
                var s = document.createElement("div");
                s.className = "done-ico", o.appendChild(s);
                var u = document.createElement("i");
                u.className = "z-icon icon-done-ico", s.appendChild(u), (j = document.createElement("div")).className = "callme__icon__text", j.innerHTML = L.ended, s.appendChild(j);
                var _ = document.createElement("div");
                if (_.className = "finish-phone-ico", o.appendChild(_), !0 === G.dtmf)(P = document.createElement("i")).className = "z-icon icon-finish-phone-ico", P.title = L.finishCall, _.appendChild(P);
                else {
                    P = document.getElementById(O);
                    var p = document.createElement("i");
                    p.className = "z-icon icon-finish-phone-ico", p.title = L.finishCall, _.appendChild(p)
                }
                if (P.style.cursor = "pointer", (U = document.createElement("div")).className = "z-callme-timer", U.innerHTML = "00:00", _.appendChild(U), !0 === G.dtmf) {
                    (W = document.createElement("div")).className = "callme__dtmf-ico", W.title = L.dtmf;
                    var g = document.createElement("i");
                    g.className = "z-icon icon-dtmf-phone-ico", W.appendChild(g), "circle" == G.shape ? H.appendChild(W) : _.appendChild(W), (Z = document.createElement("div")).className = "callme-dtmf-numpad", H.appendChild(Z);
                    var h = document.createElement("div");
                    h.className = "callme-dtmf-numpad__description", h.innerHTML = L.dtmf, Z.appendChild(h);
                    var f = document.createElement("ul");
                    f.className = "dtmf-numpad", Z.appendChild(f);
                    for (var v, b = Array(), w = 0; w <= 9; w += 1) 10 == (v = w + 1) && (v = 0), b[w] = document.createElement("li"), b[w].id = "DTMF" + v + "BTN" + O, b[w].className = "dtmf-numpad__item", b[w].setAttribute("data-value", v), b[w].innerHTML = v, f.appendChild(b[w]);
                    var M = document.createElement("audio");
                    M.id = "DTMF1" + O, M.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/dtmf-1.wav"), M.setAttribute("preload", "auto"), H.appendChild(M), document.getElementById("DTMF1" + O).load(), document.getElementById("DTMF1BTN" + O).addEventListener("click", function() {
                        document.getElementById("DTMF1" + O).play(), R.insertDTMF(1)
                    }, !1);
                    var E = document.createElement("audio");
                    E.id = "DTMF2" + O, E.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/dtmf-2.wav"), E.setAttribute("preload", "auto"), H.appendChild(E), document.getElementById("DTMF2" + O).load(), document.getElementById("DTMF2BTN" + O).addEventListener("click", function() {
                        document.getElementById("DTMF2" + O).play(), R.insertDTMF(2)
                    }, !1);
                    var y = document.createElement("audio");
                    y.id = "DTMF3" + O, y.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/dtmf-3.wav"), y.setAttribute("preload", "auto"), H.appendChild(y), document.getElementById("DTMF3" + O).load(), document.getElementById("DTMF3BTN" + O).addEventListener("click", function() {
                        document.getElementById("DTMF3" + O).play(), R.insertDTMF(3)
                    }, !1);
                    var I = document.createElement("audio");
                    I.id = "DTMF4" + O, I.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/dtmf-4.wav"), I.setAttribute("preload", "auto"), H.appendChild(I), document.getElementById("DTMF4" + O).load(), document.getElementById("DTMF4BTN" + O).addEventListener("click", function() {
                        document.getElementById("DTMF4" + O).play(), R.insertDTMF(4)
                    }, !1);
                    var T = document.createElement("audio");
                    T.id = "DTMF5" + O, T.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/dtmf-5.wav"), T.setAttribute("preload", "auto"), H.appendChild(T), document.getElementById("DTMF5" + O).load(), document.getElementById("DTMF5BTN" + O).addEventListener("click", function() {
                        document.getElementById("DTMF5" + O).play(), R.insertDTMF(5)
                    }, !1);
                    var z = document.createElement("audio");
                    z.id = "DTMF6" + O, z.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/dtmf-6.wav"), z.setAttribute("preload", "auto"), H.appendChild(z), document.getElementById("DTMF6" + O).load(), document.getElementById("DTMF6BTN" + O).addEventListener("click", function() {
                        document.getElementById("DTMF6" + O).play(), R.insertDTMF(6)
                    }, !1);
                    var C = document.createElement("audio");
                    C.id = "DTMF7" + O, C.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/dtmf-7.wav"), C.setAttribute("preload", "auto"), H.appendChild(C), document.getElementById("DTMF7" + O).load(), document.getElementById("DTMF7BTN" + O).addEventListener("click", function() {
                        document.getElementById("DTMF7" + O).play(), R.insertDTMF(7)
                    }, !1);
                    var N = document.createElement("audio");
                    N.id = "DTMF8" + O, N.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/dtmf-8.wav"), N.setAttribute("preload", "auto"), H.appendChild(N), document.getElementById("DTMF8" + O).load(), document.getElementById("DTMF8BTN" + O).addEventListener("click", function() {
                        document.getElementById("DTMF8" + O).play(), R.insertDTMF(8)
                    }, !1);
                    var x = document.createElement("audio");
                    x.id = "DTMF9" + O, x.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/dtmf-9.wav"), x.setAttribute("preload", "auto"), H.appendChild(x), document.getElementById("DTMF9" + O).load(), document.getElementById("DTMF9BTN" + O).addEventListener("click", function() {
                        document.getElementById("DTMF9" + O).play(), R.insertDTMF(9)
                    }, !1);
                    var k = document.createElement("audio");
                    k.id = "DTMF0" + O, k.setAttribute("src", "https://sohub.com.bd/click-to-call/audio/dtmf-0.wav"), k.setAttribute("preload", "auto"), H.appendChild(k), document.getElementById("DTMF0" + O).load(), document.getElementById("DTMF0BTN" + O).addEventListener("click", function() {
                        document.getElementById("DTMF0" + O).play(), R.insertDTMF(0)
                    }, !1)
                }
                var e = "callme--shown"; - 1 == (t = H.className.split(" ")).indexOf(e) && (H.className += " " + e);
                var D = 0;
                for (var w in o.children) D < parseInt(o.children[w].offsetWidth, 10) && (D = parseInt(o.children[w].offsetWidth, 10));
                D = parseInt(D, 10) + 20, o.style.width = D + "px";
                var F = [];
                G.color_bg_call.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_bg_call_hover = "rgb(" + Math.floor(.85 * F[0]) + ", " + Math.floor(.85 * F[1]) + ", " + Math.floor(.85 * F[2]) + ")", G.color_call_hover = G.color_call, G.color_border_call.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_border_call_hover = "rgb(" + Math.floor(.92 * F[0]) + ", " + Math.floor(.92 * F[1]) + ", " + Math.floor(.92 * F[2]) + ")", G.color_bg_call.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_bg_call_active = "rgb(" + Math.floor(.7 * F[0]) + ", " + Math.floor(.7 * F[1]) + ", " + Math.floor(.7 * F[2]) + ")", G.color_call_active = G.color_call, G.color_border_call.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_border_call_active = "rgb(" + Math.floor(.85 * F[0]) + ", " + Math.floor(.85 * F[1]) + ", " + Math.floor(.85 * F[2]) + ")", G.color_bg_connection.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_bg_connection_hover = "rgb(" + Math.floor(.85 * F[0]) + ", " + Math.floor(.85 * F[1]) + ", " + Math.floor(.85 * F[2]) + ")", G.color_connection_hover = G.color_connection, G.color_border_connection.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_border_connection_hover = "rgb(" + Math.floor(.92 * F[0]) + ", " + Math.floor(.92 * F[1]) + ", " + Math.floor(.92 * F[2]) + ")", G.color_bg_connection.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_bg_connection_active = "rgb(" + Math.floor(.7 * F[0]) + ", " + Math.floor(.7 * F[1]) + ", " + Math.floor(.7 * F[2]) + ")", G.color_connection_active = G.color_connection, G.color_border_connection.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_border_connection_active = "rgb(" + Math.floor(.85 * F[0]) + ", " + Math.floor(.85 * F[1]) + ", " + Math.floor(.85 * F[2]) + ")", G.color_bg_calling.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_bg_calling_hover = "rgb(" + Math.floor(.85 * F[0]) + ", " + Math.floor(.85 * F[1]) + ", " + Math.floor(.85 * F[2]) + ")", G.color_calling_hover = G.color_calling, G.color_border_calling.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_border_calling_hover = "rgb(" + Math.floor(.92 * F[0]) + ", " + Math.floor(.92 * F[1]) + ", " + Math.floor(.92 * F[2]) + ")", G.color_bg_calling.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_bg_calling_active = "rgb(" + Math.floor(.7 * F[0]) + ", " + Math.floor(.7 * F[1]) + ", " + Math.floor(.7 * F[2]) + ")", G.color_calling_active = G.color_calling, G.color_border_calling.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_border_calling_active = "rgb(" + Math.floor(.85 * F[0]) + ", " + Math.floor(.85 * F[1]) + ", " + Math.floor(.85 * F[2]) + ")", G.color_bg_ended.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_bg_ended_hover = "rgb(" + Math.floor(.85 * F[0]) + ", " + Math.floor(.85 * F[1]) + ", " + Math.floor(.85 * F[2]) + ")", G.color_ended_hover = G.color_ended, G.color_border_ended.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_border_ended_hover = "rgb(" + Math.floor(.92 * F[0]) + ", " + Math.floor(.92 * F[1]) + ", " + Math.floor(.92 * F[2]) + ")", G.color_bg_ended.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_bg_ended_active = "rgb(" + Math.floor(.7 * F[0]) + ", " + Math.floor(.7 * F[1]) + ", " + Math.floor(.7 * F[2]) + ")", G.color_ended_active = G.color_ended, G.color_border_ended.split(",").forEach(function(e, t) {
                    F[t] = parseInt(e.replace(/[^0-9]+/gi, ""), 10)
                }), G.color_border_ended_active = "rgb(" + Math.floor(.85 * F[0]) + ", " + Math.floor(.85 * F[1]) + ", " + Math.floor(.85 * F[2]) + ")";
                var B = ".z-callme-widget.callme.callme--square .callme__icon__text{font-family: " + G.font + ";}.z-callme-widget.callme.callme--default {cursor:pointer;}.z-callme-widget.callme.callme--default .callme__content {background: " + G.color_bg_call + ";box-shadow: 0 0 0 6px " + G.color_border_call + ";}.z-callme-widget.callme.callme--default .callme__icon {color: " + G.color_call + ";}.z-callme-widget.callme.callme--default .callme__content:hover {background: " + G.color_bg_call_hover + ";box-shadow: 0 0 0 6px " + G.color_border_call_hover + ";}.z-callme-widget.callme.callme--default .callme__content:hover .callme__icon {color: " + G.color_call_hover + ";}.z-callme-widget.callme.callme--default .callme__content:active {background: " + G.color_bg_call_active + ";box-shadow: 0 0 0 6px " + G.color_border_call_active + ";}.z-callme-widget.callme.callme--default .callme__content:active .callme__icon {color: " + G.color_call_active + ";}.z-callme-widget.callme.callme--connecting {cursor:pointer;}.z-callme-widget.callme.callme--connecting .callme__content {background: " + G.color_bg_connection + ";box-shadow: 0 0 0 6px " + G.color_border_connection + ";}.z-callme-widget.callme.callme--connecting .callme__icon {color: " + G.color_connection + ";}.z-callme-widget.callme.callme--connecting .callme__content:hover {background: " + G.color_bg_connection_hover + ";box-shadow: 0 0 0 6px " + G.color_border_connection_hover + ";}.z-callme-widget.callme.callme--connecting .callme__content:hover .callme__icon {color: " + G.color_connection_hover + ";}.z-callme-widget.callme.callme--connecting .callme__content:active {background: " + G.color_bg_connection_active + ";box-shadow: 0 0 0 6px " + G.color_border_connection_active + ";}.z-callme-widget.callme.callme--connecting .callme__content:active .callme__icon {color: " + G.color_connection_active + ";}.z-callme-widget.callme.callme--speaking .callme__content {background: " + G.color_bg_calling + ";box-shadow: 0 0 0 6px " + G.color_border_calling + ";}.z-callme-widget.callme.callme--speaking .callme__icon {color: " + G.color_calling + ";}" + ("circle" == G.shape ? ".z-callme-widget.callme.callme--speaking {cursor:pointer;}.z-callme-widget.callme.callme--speaking .callme__content:hover {background: " + G.color_bg_calling_hover + ";box-shadow: 0 0 0 6px " + G.color_border_calling_hover + ";}.z-callme-widget.callme.callme--speaking .callme__content:hover .callme__icon {color: " + G.color_calling_hover + ";}.z-callme-widget.callme.callme--speaking .callme__content:active {background: " + G.color_bg_calling_active + ";box-shadow: 0 0 0 6px " + G.color_border_calling_active + ";}.z-callme-widget.callme.callme--speaking .callme__content:active .callme__icon {color: " + G.color_calling_active + ";}" : ".z-callme-widget.callme.callme--speaking {pointer:default;}") + ".z-callme-widget.callme.callme--finished {cursor:pointer;}.z-callme-widget.callme.callme--finished .callme__content {background: " + G.color_bg_ended + ";box-shadow: 0 0 0 6px " + G.color_border_ended + ";}.z-callme-widget.callme.callme--finished .callme__icon {color: " + G.color_ended + ";}.z-callme-widget.callme.callme--finished .callme__content:hover {background: " + G.color_bg_ended_hover + ";box-shadow: 0 0 0 6px " + G.color_border_ended_hover + ";}.z-callme-widget.callme.callme--finished .callme__content:hover .callme__icon {color: " + G.color_ended_hover + ";}.z-callme-widget.callme.callme--finished .callme__content:active {background: " + G.color_bg_ended_active + ";box-shadow: 0 0 0 6px " + G.color_border_ended_active + ";}.z-callme-widget.callme.callme--finished .callme__content:active .callme__icon {color: " + G.color_ended_active + ';}.z-callme-widget.callme{width:auto;}.z-callme-widget.callme.callme--speaking [class^="icon-"],.z-callme-widget.callme.callme--speaking [class*="icon-"]{ color:' + G.color_calling + '}.z-callme-widget.callme.callme--speaking [class^="icon-"]:hover,.z-callme-widget.callme.callme--speaking [class*="icon-"]:hover{ color:' + G.color_calling_hover + '}.z-callme-widget.callme.callme--speaking [class^="icon-"]:active,.z-callme-widget.callme.callme--speaking [class*="icon-"]:active{ color:' + G.color_calling_active + "}.icon-finish-phone-ico{cursor:pointer;}",
                    A = document.createElement("style");
                A.type = "text/css", A.styleSheet ? A.styleSheet.cssText = B : A.appendChild(document.createTextNode(B));
                H.appendChild(A)
            }).call(this),
                function() {
                    H.addEventListener("mousedown", w, !1), W && W.addEventListener("click", function() {
                        y.call(this)
                    }, !1);
                    P.addEventListener("click", function() {
                        "calling" == v && z.call(this, "ended")
                    }, !1), window.onbeforeunload = function(e) {
                        N.call(this)
                    }
                }.call(this)
        }

        function y(e) {
            !1 !== G.dtmf && (e && "off" == e ? (Z.className = Z.className.replace(/ callme-dtmf-numpad--opened/i, ""), W.className = W.className.replace(/ callme__dtmf-ico--shown/i, ""), clearTimeout(g)) : e && "on" == e ? Z.className.match(/ callme-dtmf-numpad--opened/i) || (Z.className += " callme-dtmf-numpad--opened", W.className += " callme__dtmf-ico--shown") : Z.className.match(/ callme-dtmf-numpad--opened/i) ? (Z.className = Z.className.replace(/ callme-dtmf-numpad--opened/i, ""), W.className = W.className.replace(/ callme__dtmf-ico--shown/i, ""), clearTimeout(g)) : (Z.className += " callme-dtmf-numpad--opened", W.className += " callme__dtmf-ico--shown"))
        }

        function I() {
            var e = window.MediaStream;
            void 0 === e && "undefined" != typeof webkitMediaStream && (e = webkitMediaStream), void 0 === e || "stop" in e.prototype || (e.prototype.stop = function() {
                this.getAudioTracks().forEach(function(e) {
                    e.stop()
                })
            }), z.call(this, "ended")
        }

        function T() {
            clearInterval(r), document.getElementById("outgoingRing_" + O).pause(), document.getElementById("outgoingRing_" + O).currentTime = 0
        }

        function z(e) {
            if (T.call(this), function() {
                    document.getElementById("buzyRing_" + O).pause(), document.getElementById("buzyRing_" + O).currentTime = 0
                }.call(this), !0 !== b) {
                var t = v;
                e ? "ended" == e ? v = "ended" : "call" == e ? v = "call" : "calling" == e && (H.removeEventListener("click", w, !1), v = "calling") : "call" == v ? (function() {
                    c = new h, n = !1 !== c && c.createGain();
                    var e = document.createElement("script");
                    e.src = "https://api.zadarma.com/sys/webrtc/create_callId.php?jsonpCallback=" + l + ".setCallId&widgetId=" + G.widgetId + "&sipId=" + G.sipId + "&language=" + G.language + "&url=" + encodeURI(document.location.href).replace("#", "%23"), H.appendChild(e)
                }.call(this), v = "connection") : "connection" == v ? (v = "ended", d = "none") : "ended" == v && (v = "call"), "calling" == v ? H.removeEventListener("mousedown", w, !1) : (H.removeEventListener("mousedown", w, !1), H.addEventListener("mousedown", w, !1)), t != v && function(e) {
                    clearTimeout(m);
                    var t = "";
                    "call" == v ? t = "callme--default" : "connection" == v ? t = "callme--connecting" : "calling" == v ? (function() {
                        p = Math.ceil(x.call(this) / 1e3), s = setInterval(function() {
                            var e = Math.ceil(x.call(this) / 1e3);
                            u = (e - p) % 60, _ = Math.floor((e - p) / 60), U.innerHTML = (_ < 10 ? "0" : "") + _ + ":" + (u < 10 ? "0" : "") + u
                        }, 1e3)
                    }.call(this), t = "callme--speaking", !0 === G.dtmf && (y.call(this, "on"), 0 < G.dtmf_time_to_disappear && (g = setTimeout(function() {
                        y.call(this, "off")
                    }, 1e3 * G.dtmf_time_to_disappear)))) : "ended" == v && (t = "callme--finished", function() {
                        clearInterval(s), U.innerHTML = "00:00"
                    }.call(this), "calling" == e || d && "none" == d ? (j.innerHTML = L.ended, function() {
                        var e = document.getElementById("hangup_" + O).play();
                        void 0 !== e && e.catch(function() {
                            console.error("User browser disabled autoplaying media - no ringing.")
                        }).then(function() {})
                    }.call(this), N.call(this)) : (j.innerHTML = L.buzy, function() {
                        var e = document.getElementById("buzyRing_" + O).play();
                        void 0 !== e && e.catch(function() {
                            console.error("User browser disabled autoplaying media - no ringing.")
                        }).then(function() {})
                    }.call(this)), y.call(this, "off"));
                    "call" == e ? H.className = H.className.replace(/callme--default/i, t) : "connection" == e ? H.className = H.className.replace(/callme--connecting/i, t) : "calling" == e ? H.className = H.className.replace(/callme--speaking/i, t) : "ended" == e && (H.className = H.className.replace(/callme--finished/i, t));
                    m = setTimeout(function() {
                        d = ""
                    }, 1e3)
                }.call(this, t)
            } else console.error("Wrong parameters of callme widget.")
        }

        function C() {
            o.on("connected", function(e) {
                f = 0, H.style.visibility = "visible"
            }), o.on("disconnected", function(e) {
                var t = G.domain;
                f += 1, o.stop(), clearTimeout(a), f < 5 ? a = setTimeout(function() {
                    k.call(this, 1, t)
                }, 4e3) : console.error("Servers are unable at this moment. Try to connect later.")
            }), o.on("newRTCSession", function(e) {
                (i = e.session).on("confirmed", function(e) {
                    if (z.call(this, "calling"), 0 < i.connection.getReceivers().length) {
                        var t = i.connection.getReceivers()[0].track,
                            a = new MediaStream;
                        t && (a.addTrack(t), D(a))
                    } else 0 < i.connection.getRemoteStreams().length && D(i.connection.getRemoteStreams()[0]);
                    i.connection.getSenders ? R = i.connection.getSenders()[0].dtmf : i.connection.createDTMFSender && (R = i.connection.createDTMFSender(i.connection.getSenders()[0].getAudioTracks()[0]))
                }), i.on("progress", function(e) {
                    183 == e.response.status_code && !1 !== c && -1 == navigator.userAgent.search(/Firefox/) ? T.call(this) : function() {
                        clearInterval(r), r = setInterval(function() {
                            var e = document.getElementById("outgoingRing_" + O).play();
                            void 0 !== e && e.catch(function() {
                                console.error("User browser disabled autoplaying media - no ringing.")
                            }).then(function() {})
                        }, 3e3)
                    }.call(this), -1 != navigator.userAgent.search(/Firefox/) && (e.response.data = null, e.response.body = null)
                }), i.on("ended", function() {
                    I.call(this)
                }), i.on("failed", function(e) {
                    I.call(this)
                }), i.on("addstream", function(e) {
                    S.srcObject = e.stream, S.onloadedmetadata = function(e) {
                        S.play()
                    }
                })
            })
        }

        function N() {
            i && i.status && 8 != i.status && i.terminate()
        }

        function x() {
            return +new Date
        }
 
        function k(e, t) {
            var a = document.createElement("script"); 
            a.src = "call_api.php?jsonpCallback=" + l + ".Callback&widgetId=" + G.widgetId + "&sipId=" + G.sipId + "&language=" + G.language + (1 == e ? "&reconnect=1" + (t ? "&domain=" + t : "") : ""), H.appendChild(a)
        }

        function D(e) {
            if (S.srcObject = e, !(S.onloadedmetadata = function(e) {
                    S.play(), !1 === M && (S.muted = !0)
                }) !== c) {
                var t = c.createMediaStreamSource(S.srcObject);
                !1 === M && (t.connect(n), n.gain.setValueAtTime(1, c.currentTime), n.connect(c.destination))
            }
        }
        CallmeWidgetNew.prototype.setCallId = function(e) {
            !0 !== b && (t = e.callId, o.call("sip:" + G.sipId + "@" + G.domain, {
                mediaConstraints: {
                    audio: !0,
                    video: !1
                },
                pcConfig: {
                    rtcpMuxPolicy: "negotiate"
                },
                extraHeaders: ["callid:" + t, "widgetid: " + G.widgetId, "language: " + ("ua" == G.language ? "ru" : G.language)]
            }).connection.addEventListener("addstream", function(e) {
                D(e.stream)
            }))
        }, CallmeWidgetNew.prototype.create = function(e, t) {
            G.widgetId = e.widgetId, G.sipId = e.sipId, O = e.domElement,
                function(e) {
                    for (var t in e) el = e[t], "shape" == t && "circle" != el ? G[t] = "square" : "dtmf" == t && !0 !== el ? G[t] = !1 : "dtmf_position" == t && "right" !== el && "bottom" !== el && "left" !== el ? G[t] = "top" : "dtmf_time_to_disappear" == t && (el <= 0 || el != parseInt(el, 10)) ? G[t] = 0 : G[t] = "width" == t ? el.toString() : el, "" == G.language && (G.language = "en")
                }.call(this, t), H = document.getElementById(O);
            var a = document.createElement("script");
            a.src = "check_widget_status.php?jsonpCallback=" + l + ".zadarmaCreate&widgetId=" + G.widgetId + "&sipId=" + G.sipId + "&language=" + G.language, H.appendChild(a)
        }, CallmeWidgetNew.prototype.zadarmaCreate = function(e) {
            void 0 === L.call && (L = e.texts), console.log(e, L), G.txt_greeting = e.txt_greeting, G.txt_nowebrtc = e.txt_nowebrtc, !1 === function() {
                var e = window.navigator.userAgent,
                    t = e.indexOf("MSIE ");
                if (0 < t) return parseInt(e.substring(t + 5, e.indexOf(".", t)), 10);
                if (0 < e.indexOf("Trident/")) {
                    var a = e.indexOf("rv:");
                    return parseInt(e.substring(a + 3, e.indexOf(".", a)), 10)
                }
                var l = e.indexOf("Edge/");
                return 0 < l && parseInt(e.substring(l + 5, e.indexOf(".", l)), 10)
            }() && DetectRTC.isWebRTCSupported ? "https:" != document.location.protocol ? (H.innerHTML = G.txt_nowebrtc, console.error("You are trying to use Callme Widget with http:// protocol site.")) : ("" != G.txt_greeting && (L.call = G.txt_greeting), e && e.status && 1 == e.status ? (H.style.opacity = 0, E.call(this), H.style.opacity = 1, k.call(this)) : (H.innerHTML = G.txt_nowebrtc, console.error("Callme Widget is switched off or not exists"))) : (H.innerHTML = G.txt_nowebrtc, console.error("Callme Widget is not supported by your browser"))
        }, CallmeWidgetNew.prototype.Callback = function(e) {
            if (e && e.domain) {
                G.domain = e.domain, G.username = e.username, G.pass = e.pass, JsSIP.C.USER_AGENT = "CallmeButton Widget";
                var t = {
                    sockets: [new JsSIP.WebSocketInterface("wss://" + G.domain + ":8089/ws")],
                    uri: "sip:" + G.username + "@" + e.domain,
                    display_name: G.username,
                    password: G.pass,
                    register: !1
                };
                (o = new JsSIP.UA(t)).start(), C.call(this)
            } else b = !0
        }
    }
}();